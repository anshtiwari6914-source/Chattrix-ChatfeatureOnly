<!-- public/index.html (fixed) -->
<!doctype html>
<html>
<head>
  <meta charset="utf-8" />
  <title>Chattrix</title>
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <link rel="stylesheet" href="/style.css">

</head>
<body>
  
    <!-- status updated by client.js -->
  </div>

  <!-- NAVBAR -->
  <nav class="navbar">
    <div class="nav-left">
      <div class="logo">C</div>
      <span class="brand">Chattrix</span>
    </div>

    <div id="onlineCount" style="font-weight:600; margin-top:10px;">
    People Online: 0
  </div>

  <div id="systemMessage" class="system-message">
  Waiting for a user...
  </div>


    <div class="nav-right">
      <a class="active">Home</a>
      <a href="about.html">About</a>
      <a href="safety.html">Safety</a>
      <a href="help.html">Help</a>
    </div>
  </nav>

  <!-- MAIN CONTAINER -->
  <div class="main-wrapper">

    <!-- LEFT : VIDEO SECTION -->
    <div class="video-section">

      <h2 class="title">Vibe Check: Connected ðŸ’«</h2>

      <div class="videos">
        <!-- your (local) video -->
        <div class="video-wrapper">
          <div class="video-label">You</div>
          <video id="myVideo" class="video-box" autoplay playsinline width="300" muted></video>
        </div>

        <!-- remote peer video (must be a <video> element) -->
        <div class="video-wrapper">
          <div class="video-label">Stranger</div>
          <video id="peerVideo" class="video-box" autoplay playsinline width="300"></video>
        </div>
      </div>

      <div class="controls">
        <button id="startBtn">Letâ€™s Vibe</button>
        <button class="Cbtn"id="skipBtn" disabled>Skip</button>
        <button class="Cbtn"id="leaveBtn" disabled>Leave</button>
        <button class="Cbtn"id="toggleCamBtn">Hide Camera</button>
        <button class="Cbtn"id="toggleMicBtn">Mute</button>
      </div>
      
      <p id="Disclaimer">Disclaimer : Chat responsiblyâ€”strangers can be funâ€¦ or weird, mostly weird.</p>
      
    </div>

    <!-- RIGHT : CHAT SECTION -->
    <div class="chat-section">
      <div id="pretext" class="chat-info">
        <span class="wave">ðŸ‘‹</span>
        <h3>Say hello to<br>your new match!</h3>
      </div>

      <div id="chatWindow" class="chat-window"></div>

      <div class="chat-input">
        <input id="chatMsg" type="text" placeholder="Type message here...">
        <button  id="sendBtn" disabled>Send</button>
      </div>
    </div>
  </div>


<script src="/socket.io/socket.io.js"></script>
<script src="/client.js"></script>

<script src="https://www.gstatic.com/firebasejs/10.13.0/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/10.13.0/firebase-auth-compat.js"></script>

<script>
  const firebaseConfig = {
    apiKey: "AIzaSyDzs75cgOPRzG2q_6_ofCIJ-lTKcSB3YK4",
  authDomain: "chattrix-e70e2.firebaseapp.com",
  projectId: "chattrix-e70e2",
  storageBucket: "chattrix-e70e2.firebasestorage.app",
  messagingSenderId: "381880163728",
  appId: "1:381880163728:web:cf07f5fdf20e7b3edfa715",
  measurementId: "G-WHTCTFD1JN"
  };
  firebase.initializeApp(firebaseConfig);
</script>

<script>
document.addEventListener("visibilitychange", () => {
  if (document.hidden) {
    firebase.auth().signOut().then(() => {
      window.location.href = "/";
    });
  }
});
</script>


</body>
</html>

